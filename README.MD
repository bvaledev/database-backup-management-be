<p align="center" dir="auto">
  <img src="./logo.png" width="120" alt="DBBM Logo" style="max-width: 100%;">
</p>

# Database Backup Management

Sistema em Go para gerenciamento automatizado de backups de bancos de dados PostgreSQL. Oferece suporte a m√∫ltiplos bancos cadastrados, backups agendados, compacta√ß√£o com Gzip e API RESTful.

---

## üöÄ Funcionalidades

- üîÅ Backup agendado via cron e disparado manualmente  
- üíæ Exporta√ß√£o compactada em `.sql.gz` ou `.backup.gz`  
- ‚ôªÔ∏è Restaura√ß√£o autom√°tica com descompacta√ß√£o e identifica√ß√£o do tipo  
- üîê Criptografia de senhas com AES-256  
- üåê API REST para gerenciar datasources e opera√ß√µes de backup  
- ‚öñÔ∏è Configura√ß√£o via `.env`  
- üìÅ Diret√≥rio `./backups` gerenciado automaticamente  
- ‚è∞ Datasources com cron ativo executam backup automaticamente ao serem criados  
- üñ•Ô∏è [Reposit√≥rio frontend](https://github.com/bvaledev/database-backup-management-fe)
---

## ‚öôÔ∏è Configura√ß√£o

Crie um arquivo `.env` na raiz do projeto com o seguinte conte√∫do:

```
# Criptografia AES-256 (32 bytes base64)
ENCRYPTION_KEY=JIqt09KGtILwIXYtFFLXNj3SaBvxjcy9wrbDvhVtkCk=

# Banco de dados principal do sistema
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=root
DB_NAME=scheduler_db
DB_SSL_MODE=disable
```

---

## üì¶ Instala√ß√£o e execu√ß√£o

```bash
# Instale as depend√™ncias
go mod tidy

# Execute a aplica√ß√£o
go run ./cmd/api/main.go

# Pode utilizar tamb√©m
air
```

---

## üß™ Endpoints dispon√≠veis

M√©todo | Rota                                          | Descri√ß√£o
------ | --------------------------------------------- | -------------------------------------------------
GET    | /v1/datasources                               | Lista todos os datasources
GET    | /v1/datasources/{id}                          | Retorna um datasource espec√≠fico
POST   | /v1/datasources                               | Cria um novo datasource
PUT    | /v1/datasources/{id}                          | Atualiza um datasource
DELETE | /v1/datasources/{id}                          | Remove um datasource
GET    | /v1/backups?datasourceId                      | Lista todos os backups
GET    | /v1/backups/{id}                              | Retorna um backup espec√≠fico
POST   | /v1/backups                                   | Cria um novo backup para um datasource espec√≠fico
POST   | /v1/backups/{id}/restore-backup?datasourceId= | Restaura um backup para um datasource
DELETE | /v1/backups/{id}                              | Remove um backup e seu arquivos

> Obs.: query param `?datasourceId=` √© opcional.

---

## üõ†Ô∏è Tecnologias

- [Go](https://go.dev/) ‚Äî Linguagem principal do projeto
- [Chi](https://github.com/go-chi/chi) ‚Äî Roteador HTTP minimalista
- [Chi CORS](https://github.com/go-chi/cors) ‚Äî Middleware para suporte a CORS
- [robfig/cron](https://github.com/robfig/cron) ‚Äî Agendamento de tarefas com sintaxe cron
- [google/uuid](https://github.com/google/uuid) ‚Äî Gera√ß√£o de UUIDs
- [godotenv](https://github.com/joho/godotenv) ‚Äî Carregamento de vari√°veis do `.env`
- [lib/pq](https://github.com/lib/pq) ‚Äî Driver PostgreSQL nativo para Go
- AES-256 ‚Äî Criptografia de senhas (implementada via biblioteca padr√£o `crypto/aes`)

---

## ‚úçÔ∏è Autor

Desenvolvido por [@bvaledev](https://github.com/bvaledev)

---

## ‚ö†Ô∏è Observa√ß√µes

- Apenas bancos PostgreSQL s√£o suportados no momento.
- Todos os backups s√£o compactados com Gzip por padr√£o.
- As credenciais s√£o criptografadas com AES-256 no banco de dados principal.
- Ao cadastrar um datasource com cron habilitado, o backup ser√° executado automaticamente.
- A API para restaura√ß√£o ainda est√° em desenvolvimento.
